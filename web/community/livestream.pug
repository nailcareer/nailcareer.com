
extends ../_templates/_page.pug

block append variables
	- pageName = "community"
	- pageSubtitle = "Community Livestream"

block append head
	style.
		.live {
			padding: 0 1em;
			max-width: 1600px;
			margin: auto;
			text-align: left;
		}
		.live .boxes {
			width: 100%;
			display: flex;
			flex-direction: row;
			flex-wrap: wrap;
		}
		.live .boxes > * {
			flex: 1 1 16em;
			padding: 0.5em;
		}
		.live .boxes .videobox {
			flex-grow: 3;
			display: flex;
			flex-direction: column;
			justify-content: center;
			background: #0281;
		}
		.live .boxes .videobox img {
			width: 100%;
			aspect-ratio: 16 / 9;
		}
		.live .boxes .chatbox {
			display: flex;
			flex-direction: column;
			background: #0282;
		}
		.live .boxes .chatbox > xiome-video-companion {
			height: 100%;
		}
		.live .boxes .chatbox > xiome-video-companion > * {
			flex: 1 1 auto;
		}
		.live[data-chat="false"] .boxes .chatbox {
			display: none;
		}
		.live .boxes .chatbox iframe {
			height: 100% !important;
			width: 100% !important;
			min-height: 16em;
		}

		.live .controls {
			padding: 1em;
			text-align: center;
		}
		.live .controls button {
			font: inherit;
			color: currentColor;
			padding: 0.2em 0.6em;
			background: transparent;
			border: 2px solid;
			border-radius: 5px;
			cursor: pointer;
		}
		.live .controls button:hover {
			background: #0282;
		}
		.helpboxes {
			display: flex;
			flex-direction: row;
			flex: 1 1 16em;
			flex-wrap: wrap;
			gap: 1em;
		}
		.helpboxes > * {
			padding: 1em;
			max-width: 24em;
		}
		.helpboxes > * > * + * {
			margin-top: 0.6em;
		}
		.live[data-chat="true"] .help-chat .toggle {
			display: none;
		}
		.help-chat ul {
			padding-left: 1.5em;
		}
		.help-chat ul > li + li {
			margin-top: 0.5em;
		}

block main
	div(data-community-page="livestream")
		.plate
			nav.subnav
				a(href="./") Welcome
				a(href="./qa" data-tag="new") Q&amp;A
				a(data-tag="soon" data-marked) Livestream
				a(data-tag="soon") Premium
		.live(data-chat="true")
			.boxes
				.videobox
					//- img(src="/assets/images-medium/courses/suzie-event-01.jpg")
					xiome-video-display(initially-hidden)
						p(slot="unavailable") livestream is coming soon
						p(slot="unprivileged") your account does not have permission to view the livestream
				.chatbox
					xiome-video-companion(initially-hidden)
						xiome-chat
			.controls
				button.togglechat Toggle Chat
			.helpboxes
				.help-stream
					h3 Welcome to Suzie's Livestream
					p Stay tuned for scheduling information.
					p If you are having troubles getting the livestream working, please email #[nce-email(user="chase" domain="nailcareer.com")]
				.help-chat
					h3 How to participate in the live chat
					ul
						li.toggle Press the "Toggle Chat" button
						li Press #[em "Click here to join the conversation..."]
						li Select #[em "Guest"] as your login method
						li Make up a nickname just for the live chat
						li Type your message to Suzie and press Enter
			script.
				const live = document.querySelector(".live")
				const toggle = document.querySelector(".live .togglechat")
				toggle.onclick = () => {
					const isActive = live.getAttribute("data-chat") === "true"
					live.setAttribute("data-chat", isActive ? "false" : "true")
				}
